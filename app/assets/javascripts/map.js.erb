$(document).on('ready page:load', function(){
    TechlistApp = Ember.Application.create({rootElement: '#map'});

    TechlistApp.MarkerCollectionLayer =
      EmberLeaflet.MarkerCollectionLayer.extend({
        contentBinding: 'controller'});

    TechlistApp.IndexView =
      EmberLeaflet.MapView.extend({
        center: L.latLng(<%= ENV.fetch('MAP_DEFAULT_LAT') %>, <%= ENV.fetch('MAP_DEFAULT_LON') %>),
        zoom: <%= ENV.fetch('MAP_DEFAULT_ZOOM') %>,
        options: {maxZoom: 19, minZoom: 0},
        childLayers: [
          EmberLeaflet.DefaultTileLayer,
          TechlistApp.MarkerCollectionLayer]
      });

    TechlistApp.IndexController =
      Ember.ArrayController.extend({
        content: [
          {location: L.latLng(47.472041,-0.551269)},
          {location: L.latLng(47.473826,-0.548895)},
          {location: L.latLng(47.478667,-0.60619)}
        ]
      });
});
